import{j as t,r as c,u as x,C as N,O as z,c as C}from"./r3f-DRZhHHGp.js";import{E as L,k as O}from"./three-9yQFNxHX.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const p of i.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&e(p)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const R="_mainLayout_w4lzu_27",T={mainLayout:R},k=({children:o})=>t.jsx("div",{className:T.mainLayout,children:o}),I="_header_cjbvp_27",E="_title_cjbvp_38",B="_subtitle_cjbvp_48",_={header:I,title:E,subtitle:B},A=()=>t.jsxs("header",{className:_.header,children:[t.jsx("h1",{className:_.title,children:"Our Christmas Memory Tree"}),t.jsx("p",{className:_.subtitle,children:"2022 - 2025"})]}),G="_timeline_12d87_27",F="_container_12d87_40",$="_yearButton_12d87_55",Y="_active_12d87_70",j={timeline:G,container:F,yearButton:$,active:Y},D=({currentYear:o,years:r,onChange:n})=>t.jsx("div",{className:j.timeline,children:t.jsx("div",{className:j.container,children:r.map(e=>t.jsx("button",{className:`${j.yearButton} ${e===o?j.active:""}`,onClick:()=>n(e),children:e},e))})}),H="_overlay_ewohb_27",U="_polaroid_ewohb_42",q="_closeButton_ewohb_57",K="_imageContainer_ewohb_75",V="_image_ewohb_75",W="_caption_ewohb_93",X="_captionText_ewohb_97",J="_date_ewohb_105",Q="_stickyNote_ewohb_111",m={overlay:H,polaroid:U,closeButton:q,imageContainer:K,image:V,caption:W,captionText:X,date:J,stickyNote:Q},Z=({photo:o,onClose:r})=>o?t.jsx("div",{className:m.overlay,onClick:r,children:t.jsxs("div",{className:m.polaroid,onClick:n=>n.stopPropagation(),children:[t.jsx("button",{className:m.closeButton,onClick:r,children:"âœ•"}),t.jsx("div",{className:m.imageContainer,children:t.jsx("img",{src:o.url,alt:o.caption,className:m.image})}),t.jsxs("div",{className:m.caption,children:[t.jsx("p",{className:m.captionText,children:o.caption}),t.jsx("p",{className:m.date,children:o.date})]}),t.jsx("div",{className:m.stickyNote,children:o.id})]})}):null,tt="_loadingScreen_1nkco_27",ot="_content_1nkco_40",et="_spinner_1nkco_44",st="_title_1nkco_54",nt="_progressBar_1nkco_61",rt="_progressFill_1nkco_70",g={loadingScreen:tt,content:ot,spinner:et,title:st,progressBar:nt,progressFill:rt},it=({progress:o})=>t.jsx("div",{className:g.loadingScreen,children:t.jsxs("div",{className:g.content,children:[t.jsx("div",{className:g.spinner}),t.jsx("h2",{className:g.title,children:"Loading Memories..."}),o!==void 0&&t.jsx("div",{className:g.progressBar,children:t.jsx("div",{className:g.progressFill,style:{width:`${o}%`}})})]})}),at="_mobileControls_149or_27",ct="_text_149or_50",v={mobileControls:at,text:ct},lt=({autoHide:o=!0,hideDelay:r=3e3})=>{const[n,e]=c.useState(!0);return c.useEffect(()=>{if(o){const s=setTimeout(()=>e(!1),r);return()=>clearTimeout(s)}},[o,r]),n?t.jsx("div",{className:v.mobileControls,children:t.jsx("p",{className:v.text,children:"ðŸ‘† å–®æŒ‡æ—‹è½‰ â€¢ ðŸ‘Œ é›™æŒ‡ç¸®æ”¾"})}):null},pt=({photo:o,onClick:r,isHovered:n=!1})=>{const[e,s]=c.useState(!1),i=c.useRef(null);x(d=>{if(i.current){const h=d.clock.elapsedTime,u=parseFloat(o.id.split("-")[1]||"0");i.current.position.y=o.position.y+Math.sin(h+u)*.02,i.current.rotation.y+=.005}});const p=e||n?1.2:1;return t.jsxs("mesh",{ref:i,position:[o.position.x,o.position.y,o.position.z],onClick:d=>{d.stopPropagation(),r()},onPointerOver:d=>{d.stopPropagation(),s(!0),document.body.style.cursor="pointer"},onPointerOut:()=>{s(!1),document.body.style.cursor="default"},scale:p,castShadow:!0,children:[t.jsx("sphereGeometry",{args:[.25,32,32]}),t.jsx("meshStandardMaterial",{color:o.color,metalness:.6,roughness:.2,emissive:e?o.color:"#000000",emissiveIntensity:e?.5:.1})]})},dt=()=>{const o=new O,r=.4,n=.16,e=5;for(let s=0;s<e*2;s++){const i=s%2===0?r:n,p=s*Math.PI/e-Math.PI/2,d=Math.cos(p)*i,h=Math.sin(p)*i;s===0?o.moveTo(d,h):o.lineTo(d,h)}return o.closePath(),o},ut=({position:o,photo:r,onClick:n})=>{const[e,s]=c.useState(!1),i=c.useRef(null),p=c.useRef(null),d=c.useMemo(()=>{const u=dt(),f={depth:.1,bevelEnabled:!0,bevelThickness:.05,bevelSize:.02,bevelSegments:3};return new L(u,f)},[]);x(u=>{if(i.current){i.current.rotation.z+=.01;const f=i.current.material,y=e?.8:.5;f.emissiveIntensity=y+Math.sin(u.clock.elapsedTime*2)*.3}if(p.current){const f=e?1.5:1;p.current.intensity=f+Math.sin(u.clock.elapsedTime*2)*.5}});const h=e?1.15:1;return t.jsxs("group",{position:o,children:[t.jsx("mesh",{ref:i,geometry:d,castShadow:!0,scale:h,onClick:u=>{r&&n&&(u.stopPropagation(),n())},onPointerOver:u=>{r&&n&&(u.stopPropagation(),s(!0),document.body.style.cursor="pointer")},onPointerOut:()=>{s(!1),document.body.style.cursor="default"},children:t.jsx("meshStandardMaterial",{color:"#ffd700",emissive:"#ffd700",emissiveIntensity:.8,metalness:.5,roughness:.3})}),t.jsx("pointLight",{ref:p,color:"#ffd700",intensity:1.5,distance:3,decay:2})]})},ht=({photos:o,starPhoto:r,onPhotoClick:n})=>{const e=c.useRef(null);return x((s,i)=>{e.current}),t.jsxs("group",{ref:e,children:[t.jsxs("mesh",{position:[0,.75,0],castShadow:!0,receiveShadow:!0,children:[t.jsx("cylinderGeometry",{args:[.3,.4,1.5,8]}),t.jsx("meshStandardMaterial",{color:"#654321",roughness:.8})]}),t.jsxs("mesh",{position:[0,3,0],castShadow:!0,receiveShadow:!0,children:[t.jsx("coneGeometry",{args:[2,2.5,8]}),t.jsx("meshStandardMaterial",{color:"#1e5631",roughness:.7})]}),t.jsxs("mesh",{position:[0,4.5,0],castShadow:!0,receiveShadow:!0,children:[t.jsx("coneGeometry",{args:[1.6,2,8]}),t.jsx("meshStandardMaterial",{color:"#2d7a4a",roughness:.7})]}),t.jsxs("mesh",{position:[0,5.8,0],castShadow:!0,receiveShadow:!0,children:[t.jsx("coneGeometry",{args:[1.2,1.5,8]}),t.jsx("meshStandardMaterial",{color:"#1e5631",roughness:.7})]}),t.jsx(ut,{position:[0,7,0],photo:r,onClick:r?()=>n(r):void 0}),o.map(s=>t.jsx(pt,{photo:s,onClick:()=>n(s)},s.id))]})},mt=()=>{const o=c.useRef(null),r=c.useMemo(()=>{const e=new Float32Array(3e3);for(let s=0;s<1e3*3;s+=3)e[s]=(Math.random()-.5)*50,e[s+1]=Math.random()*20,e[s+2]=(Math.random()-.5)*50;return e},[]);return x(()=>{if(!o.current)return;const n=o.current.geometry.attributes.position.array;for(let e=1;e<n.length;e+=3){n[e]-=.02;const s=Math.sin(Date.now()*.001+e)*.001;n[e-1]+=s,n[e]<0&&(n[e]=20,n[e-1]=(Math.random()-.5)*50)}o.current.geometry.attributes.position.needsUpdate=!0}),t.jsxs("points",{ref:o,children:[t.jsx("bufferGeometry",{children:t.jsx("bufferAttribute",{attach:"attributes-position",count:r.length/3,array:r,itemSize:3})}),t.jsx("pointsMaterial",{size:.1,color:16777215,transparent:!0,opacity:.8,sizeAttenuation:!0})]})},ft=[{color:"#ff6b6b",position:[-3,5,2]},{color:"#4ecdc4",position:[3,5,-2]},{color:"#ffd93d",position:[0,4,3]},{color:"#51cf66",position:[-2,3,-2]},{color:"#ff8c42",position:[2,6,1]}],gt=()=>{const o=c.useRef([]);return x(r=>{o.current.forEach((n,e)=>{if(n){const s=r.clock.elapsedTime,i=1+e*.3;n.intensity=.5+Math.sin(s*i)*.3}})}),t.jsx("group",{children:ft.map((r,n)=>t.jsx("pointLight",{ref:e=>{o.current[n]=e},position:r.position,color:r.color,intensity:.5,distance:5,decay:2},n))})},S=["#e03131","#c92a2a","#2f9e44","#37b24d","#f59f00","#fd7e14","#1971c2","#1864ab","#862e9c","#c0c0c0"],l=o=>{let r=0;for(let e=0;e<o.length;e++)r=o.charCodeAt(e)+((r<<5)-r);const n=Math.abs(r)%S.length;return S[n]},a=o=>"/our-christmas-tree/"+o,b=[{year:"2022",photos:[{id:"2022-1",url:a("/photos2022/photo1.jpg"),caption:"æˆ‘å€‘çš„ç¬¬ä¸€å€‹è–èª•ç¯€",date:"2022-12-24",position:{x:-1.3,y:2.5,z:.6},color:l("2022-1")},{id:"2022-2",url:a("/photos2022/photo2.jpg"),caption:"è–èª•å¤œæ™šé¤",date:"2022-12-24",position:{x:1.2,y:3.2,z:-.7},color:l("2022-2")},{id:"2022-3",url:a("/photos2022/photo3.jpg"),caption:"å†¬æ—¥å›žæ†¶",date:"2022-12-25",position:{x:-.8,y:4.3,z:1},color:l("2022-3")},{id:"2022-4",url:a("/photos2022/photo4.jpg"),caption:"è–èª•å¿«æ¨‚",date:"2022-12-25",position:{x:.9,y:5,z:.5},color:l("2022-4")},{id:"2022-5",url:a("/photos2022/photo5.jpg"),caption:"ç¾Žå¥½æ™‚å…‰",date:"2022-12-26",position:{x:-.7,y:5.8,z:-.4},color:l("2022-5")}],starPhoto:{id:"2022-star",url:a("/photos2022/photo1.jpg"),caption:"2022 å¹´åº¦ç²¾é¸å›žæ†¶",date:"2022-12-25",position:{x:0,y:7,z:0},color:"#ffd700"}},{year:"2023",photos:[{id:"2023-1",url:a("/photos2023/photo1.jpg"),caption:"å†¬æ—¥ä»™å¢ƒ",date:"2023-12-25",position:{x:-.8,y:3,z:1.2},color:l("2023-1")},{id:"2023-2",url:a("/photos2023/photo2.jpg"),caption:"æº«æš–å›žæ†¶",date:"2023-12-24",position:{x:1.3,y:3.8,z:-.4},color:l("2023-2")},{id:"2023-3",url:a("/photos2023/photo3.jpg"),caption:"è–èª•é©šå–œ",date:"2023-12-25",position:{x:-.3,y:5.5,z:.7},color:l("2023-3")},{id:"2023-4",url:a("/photos2023/photo4.jpg"),caption:"å¹¸ç¦æ™‚åˆ»",date:"2023-12-26",position:{x:.6,y:2.5,z:-1},color:l("2023-4")},{id:"2023-5",url:a("/photos2023/photo5.jpg"),caption:"æ„›çš„ç´€å¿µ",date:"2023-12-27",position:{x:-1.4,y:4.5,z:.2},color:l("2023-5")}],starPhoto:{id:"2023-star",url:a("/photos2023/photo1.jpg"),caption:"2023 å¹´åº¦ç²¾é¸å›žæ†¶",date:"2023-12-25",position:{x:0,y:7,z:0},color:"#ffd700"}},{year:"2024",photos:[{id:"2024-1",url:a("/photos2024/photo1.jpg"),caption:"é‡‘è‰²å›žæ†¶",date:"2024-12-24",position:{x:-1,y:3.2,z:.8},color:l("2024-1")},{id:"2024-2",url:a("/photos2024/photo2.jpg"),caption:"ç’€ç’¨æ™‚å…‰",date:"2024-12-24",position:{x:.9,y:4.5,z:-.5},color:l("2024-2")},{id:"2024-3",url:a("/photos2024/photo3.jpg"),caption:"æº«é¦¨è–èª•",date:"2024-12-25",position:{x:-.6,y:5.8,z:.4},color:l("2024-3")},{id:"2024-4",url:a("/photos2024/photo4.jpg"),caption:"ç”œèœœçž¬é–“",date:"2024-12-25",position:{x:1.5,y:2.8,z:.9},color:l("2024-4")},{id:"2024-5",url:a("/photos2024/photo5.jpg"),caption:"çè²´ç´€å¿µ",date:"2024-12-26",position:{x:-1.2,y:4.2,z:-.7},color:l("2024-5")}],starPhoto:{id:"2024-star",url:a("/photos2024/photo1.jpg"),caption:"2024 å¹´åº¦ç²¾é¸å›žæ†¶",date:"2024-12-25",position:{x:0,y:7,z:0},color:"#ffd700"}},{year:"2025",photos:[{id:"2025-1",url:a("/photos2025/photo1.jpg"),caption:"æ–°å¹´æ–°æ°£è±¡",date:"2025-01-01",position:{x:-.9,y:3.6,z:1},color:l("2025-1")},{id:"2025-2",url:a("/photos2025/photo2.jpg"),caption:"å¸Œæœ›ä¹‹å…‰",date:"2025-01-02",position:{x:1.1,y:4.8,z:-.3},color:l("2025-2")},{id:"2025-3",url:a("/photos2025/photo3.jpg"),caption:"ç¶ æ„ç›Žç„¶",date:"2025-01-05",position:{x:-.4,y:2.6,z:.6},color:l("2025-3")},{id:"2025-4",url:a("/photos2025/photo4.jpg"),caption:"æ˜¥æš–èŠ±é–‹",date:"2025-01-10",position:{x:.7,y:5.4,z:.8},color:l("2025-4")},{id:"2025-5",url:a("/photos2025/photo5.jpg"),caption:"æœªä¾†å¯æœŸ",date:"2025-01-15",position:{x:-1.6,y:4,z:-.4},color:l("2025-5")}],starPhoto:{id:"2025-star",url:a("/photos2025/photo1.jpg"),caption:"2025 å¹´åº¦ç²¾é¸å›žæ†¶",date:"2025-01-01",position:{x:0,y:7,z:0},color:"#ffd700"}}],P=b.map(o=>o.year),xt=()=>{const[o,r]=c.useState(P[0]),n=c.useMemo(()=>b.find(i=>i.year===o)?.photos||[],[o]),e=c.useMemo(()=>b.find(i=>i.year===o)?.starPhoto,[o]),s=c.useMemo(()=>P,[]);return{currentYear:o,setYear:r,currentPhotos:n,currentStarPhoto:e,allYears:s}},yt=()=>{const[o,r]=c.useState(null);return{selectedPhoto:o,openPhoto:s=>{r(s)},closePhoto:()=>{r(null)},isOpen:o!==null}},jt=async(o,r)=>{let n=0;const e=o.length,s=o.map(i=>new Promise(p=>{const d=new Image;d.src=i.url;const h=()=>{n++;const u=Math.round(n/e*100);r?.(u),p()};d.onload=h,d.onerror=h}));await Promise.all(s)};function _t(){const{currentYear:o,setYear:r,currentPhotos:n,currentStarPhoto:e,allYears:s}=xt(),{selectedPhoto:i,openPhoto:p,closePhoto:d}=yt(),[h,u]=c.useState(!0),[f,y]=c.useState(0);return c.useEffect(()=>{u(!0),y(0);const M=e?[...n,e]:n;jt(M,w=>{y(w)}).then(()=>{setTimeout(()=>{u(!1)},300)})},[n,e]),h?t.jsx(it,{progress:f}):t.jsxs(k,{children:[t.jsx(A,{}),t.jsxs(N,{camera:{position:[0,5,8],fov:75},shadows:!0,style:{position:"absolute",top:0,left:0},children:[t.jsx("ambientLight",{intensity:1}),t.jsx("pointLight",{position:[5,10,5],intensity:1,castShadow:!0}),t.jsx("spotLight",{position:[0,10,0],angle:Math.PI/4,penumbra:.5,intensity:.8,castShadow:!0}),t.jsxs(c.Suspense,{fallback:null,children:[t.jsx(ht,{photos:n,starPhoto:e,onPhotoClick:p}),t.jsx(mt,{}),t.jsx(gt,{})]}),t.jsx(z,{target:[0,3,0],enableDamping:!0,dampingFactor:.05,minDistance:5,maxDistance:15,minPolarAngle:Math.PI/6,maxPolarAngle:Math.PI/2.2,enablePan:!1})]}),t.jsx(D,{currentYear:o,years:s,onChange:r}),t.jsx(Z,{photo:i,onClose:d}),t.jsx(lt,{autoHide:!0,hideDelay:3e3})]})}C.createRoot(document.getElementById("root")).render(t.jsx(c.StrictMode,{children:t.jsx(_t,{})}));
