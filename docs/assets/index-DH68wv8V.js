import{j as t,r as a,u as g,C as w,O as N,c as z}from"./r3f-DRZhHHGp.js";import{E as C,k as L}from"./three-9yQFNxHX.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&e(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const O="_mainLayout_w4lzu_27",R={mainLayout:O},T=({children:o})=>t.jsx("div",{className:R.mainLayout,children:o}),k="_header_cjbvp_27",I="_title_cjbvp_38",E="_subtitle_cjbvp_48",j={header:k,title:I,subtitle:E},B=()=>t.jsxs("header",{className:j.header,children:[t.jsx("h1",{className:j.title,children:"Our Christmas Memory Tree"}),t.jsx("p",{className:j.subtitle,children:"2022 - 2025"})]}),A="_timeline_12d87_27",G="_container_12d87_40",F="_yearButton_12d87_55",$="_active_12d87_70",y={timeline:A,container:G,yearButton:F,active:$},Y=({currentYear:o,years:r,onChange:n})=>t.jsx("div",{className:y.timeline,children:t.jsx("div",{className:y.container,children:r.map(e=>t.jsx("button",{className:`${y.yearButton} ${e===o?y.active:""}`,onClick:()=>n(e),children:e},e))})}),D="_overlay_ewohb_27",H="_polaroid_ewohb_42",q="_closeButton_ewohb_57",K="_imageContainer_ewohb_75",U="_image_ewohb_75",V="_caption_ewohb_93",W="_captionText_ewohb_97",X="_date_ewohb_105",J="_stickyNote_ewohb_111",h={overlay:D,polaroid:H,closeButton:q,imageContainer:K,image:U,caption:V,captionText:W,date:X,stickyNote:J},Q=({photo:o,onClose:r})=>o?t.jsx("div",{className:h.overlay,onClick:r,children:t.jsxs("div",{className:h.polaroid,onClick:n=>n.stopPropagation(),children:[t.jsx("button",{className:h.closeButton,onClick:r,children:"âœ•"}),t.jsx("div",{className:h.imageContainer,children:t.jsx("img",{src:o.url,alt:o.caption,className:h.image})}),t.jsxs("div",{className:h.caption,children:[t.jsx("p",{className:h.captionText,children:o.caption}),t.jsx("p",{className:h.date,children:o.date})]}),t.jsx("div",{className:h.stickyNote,children:o.id})]})}):null,Z="_loadingScreen_1nkco_27",tt="_content_1nkco_40",ot="_spinner_1nkco_44",et="_title_1nkco_54",st="_progressBar_1nkco_61",nt="_progressFill_1nkco_70",f={loadingScreen:Z,content:tt,spinner:ot,title:et,progressBar:st,progressFill:nt},rt=({progress:o})=>t.jsx("div",{className:f.loadingScreen,children:t.jsxs("div",{className:f.content,children:[t.jsx("div",{className:f.spinner}),t.jsx("h2",{className:f.title,children:"Loading Memories..."}),o!==void 0&&t.jsx("div",{className:f.progressBar,children:t.jsx("div",{className:f.progressFill,style:{width:`${o}%`}})})]})}),it="_mobileControls_149or_27",at="_text_149or_50",b={mobileControls:it,text:at},ct=({autoHide:o=!0,hideDelay:r=3e3})=>{const[n,e]=a.useState(!0);return a.useEffect(()=>{if(o){const s=setTimeout(()=>e(!1),r);return()=>clearTimeout(s)}},[o,r]),n?t.jsx("div",{className:b.mobileControls,children:t.jsx("p",{className:b.text,children:"ðŸ‘† å–®æŒ‡æ—‹è½‰ â€¢ ðŸ‘Œ é›™æŒ‡ç¸®æ”¾"})}):null},lt=({photo:o,onClick:r,isHovered:n=!1})=>{const[e,s]=a.useState(!1),i=a.useRef(null);g(p=>{if(i.current){const u=p.clock.elapsedTime,d=parseFloat(o.id.split("-")[1]||"0");i.current.position.y=o.position.y+Math.sin(u+d)*.02,i.current.rotation.y+=.005}});const l=e||n?1.2:1;return t.jsxs("mesh",{ref:i,position:[o.position.x,o.position.y,o.position.z],onClick:p=>{p.stopPropagation(),r()},onPointerOver:p=>{p.stopPropagation(),s(!0),document.body.style.cursor="pointer"},onPointerOut:()=>{s(!1),document.body.style.cursor="default"},scale:l,castShadow:!0,children:[t.jsx("sphereGeometry",{args:[.25,32,32]}),t.jsx("meshStandardMaterial",{color:o.color,metalness:.6,roughness:.2,emissive:e?o.color:"#000000",emissiveIntensity:e?.5:.1})]})},pt=()=>{const o=new L,r=.4,n=.16,e=5;for(let s=0;s<e*2;s++){const i=s%2===0?r:n,l=s*Math.PI/e-Math.PI/2,p=Math.cos(l)*i,u=Math.sin(l)*i;s===0?o.moveTo(p,u):o.lineTo(p,u)}return o.closePath(),o},dt=({position:o,photo:r,onClick:n})=>{const[e,s]=a.useState(!1),i=a.useRef(null),l=a.useRef(null),p=a.useMemo(()=>{const d=pt(),m={depth:.1,bevelEnabled:!0,bevelThickness:.05,bevelSize:.02,bevelSegments:3};return new C(d,m)},[]);g(d=>{if(i.current){i.current.rotation.z+=.01;const m=i.current.material,x=e?.8:.5;m.emissiveIntensity=x+Math.sin(d.clock.elapsedTime*2)*.3}if(l.current){const m=e?1.5:1;l.current.intensity=m+Math.sin(d.clock.elapsedTime*2)*.5}});const u=e?1.15:1;return t.jsxs("group",{position:o,children:[t.jsx("mesh",{ref:i,geometry:p,castShadow:!0,scale:u,onClick:d=>{r&&n&&(d.stopPropagation(),n())},onPointerOver:d=>{r&&n&&(d.stopPropagation(),s(!0),document.body.style.cursor="pointer")},onPointerOut:()=>{s(!1),document.body.style.cursor="default"},children:t.jsx("meshStandardMaterial",{color:"#ffd700",emissive:"#ffd700",emissiveIntensity:.8,metalness:.5,roughness:.3})}),t.jsx("pointLight",{ref:l,color:"#ffd700",intensity:1.5,distance:3,decay:2})]})},ut=({photos:o,starPhoto:r,onPhotoClick:n})=>{const e=a.useRef(null);return g((s,i)=>{e.current}),t.jsxs("group",{ref:e,children:[t.jsxs("mesh",{position:[0,.75,0],castShadow:!0,receiveShadow:!0,children:[t.jsx("cylinderGeometry",{args:[.3,.4,1.5,8]}),t.jsx("meshStandardMaterial",{color:"#654321",roughness:.8})]}),t.jsxs("mesh",{position:[0,3,0],castShadow:!0,receiveShadow:!0,children:[t.jsx("coneGeometry",{args:[2,2.5,8]}),t.jsx("meshStandardMaterial",{color:"#1e5631",roughness:.7})]}),t.jsxs("mesh",{position:[0,4.5,0],castShadow:!0,receiveShadow:!0,children:[t.jsx("coneGeometry",{args:[1.6,2,8]}),t.jsx("meshStandardMaterial",{color:"#2d7a4a",roughness:.7})]}),t.jsxs("mesh",{position:[0,5.8,0],castShadow:!0,receiveShadow:!0,children:[t.jsx("coneGeometry",{args:[1.2,1.5,8]}),t.jsx("meshStandardMaterial",{color:"#1e5631",roughness:.7})]}),t.jsx(dt,{position:[0,7,0],photo:r,onClick:r?()=>n(r):void 0}),o.map(s=>t.jsx(lt,{photo:s,onClick:()=>n(s)},s.id))]})},ht=()=>{const o=a.useRef(null),r=a.useMemo(()=>{const e=new Float32Array(3e3);for(let s=0;s<1e3*3;s+=3)e[s]=(Math.random()-.5)*50,e[s+1]=Math.random()*20,e[s+2]=(Math.random()-.5)*50;return e},[]);return g(()=>{if(!o.current)return;const n=o.current.geometry.attributes.position.array;for(let e=1;e<n.length;e+=3){n[e]-=.02;const s=Math.sin(Date.now()*.001+e)*.001;n[e-1]+=s,n[e]<0&&(n[e]=20,n[e-1]=(Math.random()-.5)*50)}o.current.geometry.attributes.position.needsUpdate=!0}),t.jsxs("points",{ref:o,children:[t.jsx("bufferGeometry",{children:t.jsx("bufferAttribute",{attach:"attributes-position",count:r.length/3,array:r,itemSize:3})}),t.jsx("pointsMaterial",{size:.1,color:16777215,transparent:!0,opacity:.8,sizeAttenuation:!0})]})},mt=[{color:"#ff6b6b",position:[-3,5,2]},{color:"#4ecdc4",position:[3,5,-2]},{color:"#ffd93d",position:[0,4,3]},{color:"#51cf66",position:[-2,3,-2]},{color:"#ff8c42",position:[2,6,1]}],ft=()=>{const o=a.useRef([]);return g(r=>{o.current.forEach((n,e)=>{if(n){const s=r.clock.elapsedTime,i=1+e*.3;n.intensity=.5+Math.sin(s*i)*.3}})}),t.jsx("group",{children:mt.map((r,n)=>t.jsx("pointLight",{ref:e=>{o.current[n]=e},position:r.position,color:r.color,intensity:.5,distance:5,decay:2},n))})},v=["#e03131","#c92a2a","#2f9e44","#37b24d","#f59f00","#fd7e14","#1971c2","#1864ab","#862e9c","#c0c0c0"],c=o=>{let r=0;for(let e=0;e<o.length;e++)r=o.charCodeAt(e)+((r<<5)-r);const n=Math.abs(r)%v.length;return v[n]},_=[{year:"2022",photos:[{id:"2022-1",url:"/photos2022/photo1.jpg",caption:"æˆ‘å€‘çš„ç¬¬ä¸€å€‹è–èª•ç¯€",date:"2022-12-24",position:{x:-1.3,y:2.5,z:.6},color:c("2022-1")},{id:"2022-2",url:"/photos2022/photo2.jpg",caption:"è–èª•å¤œæ™šé¤",date:"2022-12-24",position:{x:1.2,y:3.2,z:-.7},color:c("2022-2")},{id:"2022-3",url:"/photos2022/photo3.jpg",caption:"å†¬æ—¥å›žæ†¶",date:"2022-12-25",position:{x:-.8,y:4.3,z:1},color:c("2022-3")},{id:"2022-4",url:"/photos2022/photo4.jpg",caption:"è–èª•å¿«æ¨‚",date:"2022-12-25",position:{x:.9,y:5,z:.5},color:c("2022-4")},{id:"2022-5",url:"/photos2022/photo5.jpg",caption:"ç¾Žå¥½æ™‚å…‰",date:"2022-12-26",position:{x:-.7,y:5.8,z:-.4},color:c("2022-5")}],starPhoto:{id:"2022-star",url:"/photos2022/photo1.jpg",caption:"2022 å¹´åº¦ç²¾é¸å›žæ†¶",date:"2022-12-25",position:{x:0,y:7,z:0},color:"#ffd700"}},{year:"2023",photos:[{id:"2023-1",url:"/photos2023/photo1.jpg",caption:"å†¬æ—¥ä»™å¢ƒ",date:"2023-12-25",position:{x:-.8,y:3,z:1.2},color:c("2023-1")},{id:"2023-2",url:"/photos2023/photo2.jpg",caption:"æº«æš–å›žæ†¶",date:"2023-12-24",position:{x:1.3,y:3.8,z:-.4},color:c("2023-2")},{id:"2023-3",url:"/photos2023/photo3.jpg",caption:"è–èª•é©šå–œ",date:"2023-12-25",position:{x:-.3,y:5.5,z:.7},color:c("2023-3")},{id:"2023-4",url:"/photos2023/photo4.jpg",caption:"å¹¸ç¦æ™‚åˆ»",date:"2023-12-26",position:{x:.6,y:2.5,z:-1},color:c("2023-4")},{id:"2023-5",url:"/photos2023/photo5.jpg",caption:"æ„›çš„ç´€å¿µ",date:"2023-12-27",position:{x:-1.4,y:4.5,z:.2},color:c("2023-5")}],starPhoto:{id:"2023-star",url:"/photos2023/photo1.jpg",caption:"2023 å¹´åº¦ç²¾é¸å›žæ†¶",date:"2023-12-25",position:{x:0,y:7,z:0},color:"#ffd700"}},{year:"2024",photos:[{id:"2024-1",url:"/photos2024/photo1.jpg",caption:"é‡‘è‰²å›žæ†¶",date:"2024-12-24",position:{x:-1,y:3.2,z:.8},color:c("2024-1")},{id:"2024-2",url:"/photos2024/photo2.jpg",caption:"ç’€ç’¨æ™‚å…‰",date:"2024-12-24",position:{x:.9,y:4.5,z:-.5},color:c("2024-2")},{id:"2024-3",url:"/photos2024/photo3.jpg",caption:"æº«é¦¨è–èª•",date:"2024-12-25",position:{x:-.6,y:5.8,z:.4},color:c("2024-3")},{id:"2024-4",url:"/photos2024/photo4.jpg",caption:"ç”œèœœçž¬é–“",date:"2024-12-25",position:{x:1.5,y:2.8,z:.9},color:c("2024-4")},{id:"2024-5",url:"/photos2024/photo5.jpg",caption:"çè²´ç´€å¿µ",date:"2024-12-26",position:{x:-1.2,y:4.2,z:-.7},color:c("2024-5")}],starPhoto:{id:"2024-star",url:"/photos2024/photo1.jpg",caption:"2024 å¹´åº¦ç²¾é¸å›žæ†¶",date:"2024-12-25",position:{x:0,y:7,z:0},color:"#ffd700"}},{year:"2025",photos:[{id:"2025-1",url:"/photos2025/photo1.jpg",caption:"æ–°å¹´æ–°æ°£è±¡",date:"2025-01-01",position:{x:-.9,y:3.6,z:1},color:c("2025-1")},{id:"2025-2",url:"/photos2025/photo2.jpg",caption:"å¸Œæœ›ä¹‹å…‰",date:"2025-01-02",position:{x:1.1,y:4.8,z:-.3},color:c("2025-2")},{id:"2025-3",url:"/photos2025/photo3.jpg",caption:"ç¶ æ„ç›Žç„¶",date:"2025-01-05",position:{x:-.4,y:2.6,z:.6},color:c("2025-3")},{id:"2025-4",url:"/photos2025/photo4.jpg",caption:"æ˜¥æš–èŠ±é–‹",date:"2025-01-10",position:{x:.7,y:5.4,z:.8},color:c("2025-4")},{id:"2025-5",url:"/photos2025/photo5.jpg",caption:"æœªä¾†å¯æœŸ",date:"2025-01-15",position:{x:-1.6,y:4,z:-.4},color:c("2025-5")}],starPhoto:{id:"2025-star",url:"/photos2025/photo1.jpg",caption:"2025 å¹´åº¦ç²¾é¸å›žæ†¶",date:"2025-01-01",position:{x:0,y:7,z:0},color:"#ffd700"}}],S=_.map(o=>o.year),gt=()=>{const[o,r]=a.useState(S[0]),n=a.useMemo(()=>_.find(i=>i.year===o)?.photos||[],[o]),e=a.useMemo(()=>_.find(i=>i.year===o)?.starPhoto,[o]),s=a.useMemo(()=>S,[]);return{currentYear:o,setYear:r,currentPhotos:n,currentStarPhoto:e,allYears:s}},xt=()=>{const[o,r]=a.useState(null);return{selectedPhoto:o,openPhoto:s=>{r(s)},closePhoto:()=>{r(null)},isOpen:o!==null}},yt=async(o,r)=>{let n=0;const e=o.length,s=o.map(i=>new Promise(l=>{const p=new Image;p.src=i.url;const u=()=>{n++;const d=Math.round(n/e*100);r?.(d),l()};p.onload=u,p.onerror=u}));await Promise.all(s)};function jt(){const{currentYear:o,setYear:r,currentPhotos:n,currentStarPhoto:e,allYears:s}=gt(),{selectedPhoto:i,openPhoto:l,closePhoto:p}=xt(),[u,d]=a.useState(!0),[m,x]=a.useState(0);return a.useEffect(()=>{d(!0),x(0);const P=e?[...n,e]:n;yt(P,M=>{x(M)}).then(()=>{setTimeout(()=>{d(!1)},300)})},[n,e]),u?t.jsx(rt,{progress:m}):t.jsxs(T,{children:[t.jsx(B,{}),t.jsxs(w,{camera:{position:[0,5,8],fov:75},shadows:!0,style:{position:"absolute",top:0,left:0},children:[t.jsx("ambientLight",{intensity:1}),t.jsx("pointLight",{position:[5,10,5],intensity:1,castShadow:!0}),t.jsx("spotLight",{position:[0,10,0],angle:Math.PI/4,penumbra:.5,intensity:.8,castShadow:!0}),t.jsxs(a.Suspense,{fallback:null,children:[t.jsx(ut,{photos:n,starPhoto:e,onPhotoClick:l}),t.jsx(ht,{}),t.jsx(ft,{})]}),t.jsx(N,{target:[0,3,0],enableDamping:!0,dampingFactor:.05,minDistance:5,maxDistance:15,minPolarAngle:Math.PI/6,maxPolarAngle:Math.PI/2.2,enablePan:!1})]}),t.jsx(Y,{currentYear:o,years:s,onChange:r}),t.jsx(Q,{photo:i,onClose:p}),t.jsx(ct,{autoHide:!0,hideDelay:3e3})]})}z.createRoot(document.getElementById("root")).render(t.jsx(a.StrictMode,{children:t.jsx(jt,{})}));
